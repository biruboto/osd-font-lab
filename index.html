<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OSD Font Lab</title>
  <link rel="stylesheet" href="css/app.css">
</head>

<body>
  <div class="app-shell">
    <div class="tools-brand-row">
      <div id="brandTitle" class="brandTitle" aria-label="OSD Font Lab"></div>
    </div>

    <!-- Split workspace -->
    <div class="split">

      <section class="font-pane">
        <section class="panel panel-result panel-no-header">
          <div class="panel-body">
            <div class="grid-wrap">
              <canvas id="resultGrid" class="grid-canvas"></canvas>
            </div>

            <aside class="sidecar">
              <div class="zoom-wrap">
                <div class="zoom-label">Glyph Inspector</div>
                <canvas id="resultZoom" class="zoom-canvas" width="240" height="360"></canvas>
                <div id="glyphInfo" class="inspector-body glyph-info-inline">
                  (Load a font, then click a glyph.)
                </div>
              </div>

              <div class="sidecar-controls">
                <button id="holdOriginalPreview" type="button" class="hold-preview-btn">
                  Hold for Original
                </button>

                <label class="field checkbox">
                  <input id="showGrids" type="checkbox" checked />
                  <span>Show grids</span>
                </label>

                <div class="nudgeRow tiny">
                  <span id="selCount">Selected: 1</span>
                </div>

                <div class="nudgeBox">
                  <div class="nudgeTitle">Nudge replaced ASCII</div>
                  <div class="dpad" data-nudge-target="replaced">
                    <button type="button" data-dx="0" data-dy="-1">&uarr;</button>
                    <button type="button" data-dx="0" data-dy="1">&darr;</button>
                    <button type="button" data-dx="0" data-dy="0" data-action="reset">&#10226;</button>
                    <button type="button" data-dx="-1" data-dy="0">&larr;</button>
                    <button type="button" data-dx="1" data-dy="0">&rarr;</button>
                  </div>
                  <div class="nudgeRow tiny">
                    Current: <span id="replNudgeReadout">x 0, y 0</span>
                  </div>
                </div>

                <div class="nudgeBox">
                  <div class="nudgeTitle">Nudge selection</div>
                  <div class="dpad" data-nudge-target="selection">
                    <button type="button" data-dx="0" data-dy="-1">&uarr;</button>
                    <button type="button" data-dx="0" data-dy="1">&darr;</button>
                    <button type="button" data-dx="0" data-dy="0" data-action="clear">&#10226;</button>
                    <button type="button" data-dx="-1" data-dy="0">&larr;</button>
                    <button type="button" data-dx="1" data-dy="0">&rarr;</button>
                  </div>
                </div>

                <div class="theme-radios" role="radiogroup" aria-label="Site theme">
                  <span class="theme-radios-label">Site theme:</span>
                  <label><input type="radio" name="siteTheme" value="dusk"></label>
                  <label><input type="radio" name="siteTheme" value="crt"></label>
                  <label><input type="radio" name="siteTheme" value="amber-terminal"></label>
                  <label><input type="radio" name="siteTheme" value="cold-phosphor"></label>
                  <label><input type="radio" name="siteTheme" value="lavender-circuit"></label>
                </div>
              </div>
            </aside>
          </div>
        </section>
      </section>

      <!-- RIGHT: Tools window -->
      <section class="tools-pane">
        <header class="topbar">
          <div class="topbar-right">
            <div class="exports">
              <button id="exportMCM" type="button">Export .mcm</button>
              <button id="exportPNG" type="button">Export PNG</button>
            </div>
          </div>
        </header>
        <section class="panel panel-base">
          <div class="panel-header">
            <div class="tools-section-title">- Status -</div>
            <div id="loadStatus" class="load-status hint" aria-live="polite">No file loaded.</div>
            <div class="tools-section-title">- ASCII -</div>
            <div class="panel-header-controls">
              <div class="font-select-stack">
                <label class="field field-stack bf-inline">
                  <span>Load a default font</span>
                  <select id="bfFontSelect">
                    <option value="">(choose default)</option>
                  </select>
                </label>
                <label class="field field-stack overlay-inline">
                  <span>Replace with</span>
                  <select id="overlaySelect"></select>
                </label>
              </div>
              <div class="or-select-stack" aria-hidden="true">
                <div class="or-row">
                  <span class="or-spacer" aria-hidden="true">&nbsp;</span>
                  <span class="or-sep">-OR-</span>
                </div>
                <div class="or-row">
                  <span class="or-spacer" aria-hidden="true">&nbsp;</span>
                  <span class="or-sep">-OR-</span>
                </div>
              </div>
              <div class="import-select-stack">
                <label class="field field-stack import-inline">
                  <span class="import-spacer" aria-hidden="true">&nbsp;</span>
                  <div
                    id="drop"
                    class="dropzone dropzone-inline"
                    role="button"
                    tabindex="0"
                    title="Import a base .mcm font file"
                  >
                    Drop .mcm or click
                  </div>
                </label>
                <label class="field field-stack import-inline">
                  <span class="import-spacer" aria-hidden="true">&nbsp;</span>
                  <button
                    id="yaffImportBtn"
                    type="button"
                    class="dropzone dropzone-inline"
                    title="Import a YAFF replacement overlay; glyphs larger than 12x18 are skipped"
                  >
                    Import .yaff
                  </button>
                </label>
              </div>
              <input id="file" type="file" accept=".mcm" hidden>
              <input id="yaffFile" type="file" accept=".yaff" hidden>
            </div>
            <div class="tools-section-title">- Icons -</div>
            <div class="swap-controls">
              <label class="field field-stack">
                <span>Swap target</span>
                <select id="swapTargetSelect"></select>
              </label>
              <label class="field field-stack">
                <span>Swap source</span>
                <select id="swapSourceSelect">
                  <option value="">(choose source)</option>
                </select>
              </label>
              <div class="swap-actions">
                <button id="clearSwapTargetBtn" type="button">Clear target</button>
                <button id="clearAllSwapsBtn" type="button">Clear all swaps</button>
              </div>
            </div>
          </div>

          <div class="panel-body panel-body-single panel-body-base">
            <div class="grid-wrap">
              <canvas id="baseGrid" class="grid-canvas"></canvas>
            </div>
          </div>
        </section>
      </section>

    </div>

</div>


  <script type="module" src="js/app.js"></script>
</body>
</html>
