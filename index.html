<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OSD Font Lab</title>
  <link rel="stylesheet" href="css/app.css">
</head>

<body>
  <div class="app-shell">
    <div class="tools-brand-row">
      <div class="brandCluster">
        <div id="brandTitle" class="brandTitle" aria-label="OSD Font Lab"></div>
        <canvas id="brandDrone" class="brandDrone" aria-hidden="true"></canvas>
      </div>
    </div>

    <!-- Split workspace -->
    <div class="split">

      <section class="font-pane">
        <section class="panel panel-result">
          <div class="panel-body">
            <div class="grid-wrap sheet-wrap">
              <canvas id="resultGrid" class="grid-canvas"></canvas>
            </div>
            <div class="grid-wrap hud-wrap">
              <canvas id="resultHud" class="hud-canvas" width="960" height="540"></canvas>
            </div>

            <aside class="sidecar">
              <div class="zoom-wrap">
                <div class="zoom-label">Glyph Inspector</div>
                <canvas id="resultZoom" class="zoom-canvas" width="240" height="360"></canvas>
                <div id="glyphInfo" class="inspector-body glyph-info-inline">
                  (Load a font, then click a glyph.)
                </div>
              </div>

              <div class="sidecar-controls">
                <button id="holdOriginalPreview" type="button" class="hold-preview-btn">
                  Hold for Original
                </button>

                <label class="field checkbox">
                  <input id="showGrids" type="checkbox" checked />
                  <span class="toggle-slider" aria-hidden="true"></span>
                  <span class="checkbox-label">Show grids</span>
                </label>

                <div class="nudgeRow tiny">
                  <span id="selCount">Selected glyphs: 1</span>
                </div>

                <div class="nudgeBox">
                  <div class="nudgeTitle">Nudge replaced ASCII</div>
                  <div class="dpad" data-nudge-target="replaced">
                    <button type="button" data-dx="0" data-dy="-1">&uarr;</button>
                    <button type="button" data-dx="0" data-dy="1">&darr;</button>
                    <button type="button" data-dx="0" data-dy="0" data-action="reset">&#10226;</button>
                    <button type="button" data-dx="-1" data-dy="0">&larr;</button>
                    <button type="button" data-dx="1" data-dy="0">&rarr;</button>
                  </div>
                </div>

                <div class="nudgeBox">
                  <div class="nudgeTitle">Nudge selection</div>
                  <div class="dpad" data-nudge-target="selection">
                    <button type="button" data-dx="0" data-dy="-1">&uarr;</button>
                    <button type="button" data-dx="0" data-dy="1">&darr;</button>
                    <button type="button" data-dx="0" data-dy="0" data-action="clear">&#10226;</button>
                    <button type="button" data-dx="-1" data-dy="0">&larr;</button>
                    <button type="button" data-dx="1" data-dy="0">&rarr;</button>
                  </div>
                </div>

                <div class="theme-radios" role="radiogroup" aria-label="Site theme">
                  <span class="theme-radios-label">Site theme:</span>
                  <label><input type="radio" name="siteTheme" value="dusk"></label>
                  <label><input type="radio" name="siteTheme" value="crt"></label>
                  <label><input type="radio" name="siteTheme" value="amber-terminal"></label>
                  <label><input type="radio" name="siteTheme" value="cold-phosphor"></label>
                  <label><input type="radio" name="siteTheme" value="lavender-circuit"></label>
                  <span id="themeCodeLabel" class="theme-code-label">DUSK</span>
                </div>
                <div class="font-serving-note">Serving <span id="servingFontCount" class="font-serving-count">0</span> fonts! • "Analog in aeternum"</div>
              </div>
            </aside>
          </div>
          <div class="hud-preview-controls">
            <div class="hud-format-segment" role="group" aria-label="HUD video format">
              <button id="hudFormatNtscBtn" type="button" class="hud-format-btn">NTSC</button>
              <button id="hudFormatPalBtn" type="button" class="hud-format-btn">PAL</button>
            </div>
            <label class="field checkbox">
              <input id="hudShowGuides" type="checkbox" checked />
              <span class="toggle-slider" aria-hidden="true"></span>
              <span class="checkbox-label">Grid</span>
            </label>
            <button id="hudResetDefaultsBtn" type="button">Reset Layout</button>
          </div>
        </section>

        <section class="panel panel-hud-tools">
          <div class="panel-header hud-tools-header">
            <div class="tools-section-title">- HUD Elements -</div>
          </div>
          <div class="panel-body panel-body-single">
            <div class="hud-tools-grid">
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="crosshair" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">Crosshair</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="compass" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">Compass Bar</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="rssi" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">RSSI</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="link_quality" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">Link Quality</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="main_voltage" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">Main Voltage</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="throttle" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">Throttle</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="current_draw" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">Current Draw</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="mah_drawn" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">mAh Drawn</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="gps_sats" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">GPS Sats</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="vtx_channel" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">VTX Channel</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="home_distance" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">Home Distance</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="speed" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">Speed</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="flight_mode" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">Flight Mode</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="flight_time" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">Flight Time</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="on_time" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">On Time</span></label>
              <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="warnings" /><span class="toggle-slider" aria-hidden="true"></span><span class="checkbox-label">Warnings</span></label>
              <div class="hud-element-with-input">
                <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="pilot_name" aria-label="Toggle pilot name" /><span class="toggle-slider" aria-hidden="true"></span></label>
                <input id="hudPilotNameInput" type="text" maxlength="12" placeholder="PILOT NAME" aria-label="Pilot name text" />
              </div>
              <div class="hud-element-with-input">
                <label class="field checkbox"><input type="checkbox" class="hud-element-toggle" data-hud-element="craft_name" aria-label="Toggle craft name" /><span class="toggle-slider" aria-hidden="true"></span></label>
                <input id="hudCraftNameInput" type="text" maxlength="12" placeholder="CRAFT NAME" aria-label="Craft name text" />
              </div>
            </div>
          </div>
        </section>
      </section>

      <!-- RIGHT: Tools window -->
      <section class="tools-pane">
        <header class="topbar">
          <div class="topbar-right">
            <div class="exports">
              <button id="exportMCM" type="button" title="Export a Betaflight Configurator-ready font file">Export .mcm</button>
              <button id="exportPNG1x" type="button" title="Export a pixel-perfect PNG for editing in external applications">Export 1xPNG</button>
              <button id="exportPNG3x" type="button" title="Export a large PNG for sharing">Export 3xPNG</button>
              <a class="kofi-badge" href="https://ko-fi.com/V7V51TP9SQ" target="_blank" rel="noopener noreferrer" aria-label="Support on Ko-fi" title="If you appreciate my work ♥">
                <img id="kofiBadgeIcon" class="kofi-badge-icon" alt="" />
                <span class="kofi-badge-text">Ko-fi</span>
              </a>
            </div>
          </div>
        </header>
        <section class="panel panel-base">
          <div class="panel-header">
            <div class="tools-view-toggle">
              <div class="view-toggle" role="group" aria-label="Preview mode">
                <button id="viewModeSheet" type="button" class="view-toggle-btn">Glyph Sheet</button>
                <button id="viewModeHud" type="button" class="view-toggle-btn">HUD View</button>
              </div>
            </div>
            <div class="tools-section-title">- Status -</div>
            <div id="loadStatus" class="load-status hint" aria-live="polite">No file loaded.</div>
            <div class="tools-section-title">- ASCII -</div>
            <div class="panel-header-controls">
              <div class="font-select-stack">
                <label class="field field-stack bf-inline">
                  <span>Load a default font</span>
                  <select id="bfFontSelect" title="Load a Betaflight default">
                    <option value="">(choose default)</option>
                  </select>
                </label>
                <label class="field field-stack overlay-inline">
                  <span>Replace with</span>
                  <select id="overlaySelect" title="Choose a font collection"></select>
                </label>
              </div>
              <div class="or-select-stack" aria-hidden="true">
                <div class="or-row">
                  <span class="or-spacer" aria-hidden="true">&nbsp;</span>
                  <span class="or-sep">OR</span>
                </div>
                <div class="or-row">
                  <span class="or-spacer" aria-hidden="true">&nbsp;</span>
                  <span class="or-sep">OR</span>
                </div>
              </div>
              <div class="import-select-stack">
                <label class="field field-stack import-inline">
                  <span class="import-spacer" aria-hidden="true">&nbsp;</span>
                  <div
                    id="drop"
                    class="dropzone dropzone-inline"
                    role="button"
                    tabindex="0"
                    title="Import a base .mcm or exported .png font file"
                  >
                    Drop .mcm/.png or click
                  </div>
                </label>
                <label class="field field-stack import-inline">
                  <span class="import-spacer" aria-hidden="true">&nbsp;</span>
                  <button
                    id="yaffImportBtn"
                    type="button"
                    class="dropzone dropzone-inline"
                    title="Import a YAFF replacement overlay; glyphs larger than 12x18 are skipped"
                  >
                    Import .yaff
                  </button>
                </label>
              </div>
              <input id="file" type="file" accept=".mcm,.png" hidden>
              <input id="yaffFile" type="file" accept=".yaff" hidden>
            </div>
            <div class="tools-section-title">- Icons -</div>
            <div class="swap-controls">
              <label class="field field-stack">
                <span>Swap target</span>
                <select id="swapTargetSelect"></select>
              </label>
              <label class="field field-stack">
                <span>Swap source</span>
                <select id="swapSourceSelect">
                  <option value="">(choose source)</option>
                </select>
              </label>
              <div class="swap-actions">
                <button id="clearSwapTargetBtn" type="button">Clear target</button>
                <button id="clearAllSwapsBtn" type="button">Clear all swaps</button>
              </div>
            </div>
          </div>

          <div class="panel-body panel-body-single panel-body-base">
            <div class="grid-wrap">
              <canvas id="baseGrid" class="grid-canvas"></canvas>
            </div>
          </div>
        </section>
      </section>

    </div>

</div>


  <script type="module" src="js/app.js"></script>
</body>
</html>
