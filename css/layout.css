/* css/layout.css */

/* ---------- base reset ---------- */
*{ box-sizing: border-box; }
html, body{ height: 100%; }

body{
  margin: 0;
  background: var(--bg-0);
  color: var(--text-0);
  font-family: system-ui, sans-serif;
}

/* ---------- app shell ---------- */
.app-shell{
  height: 100vh;
  padding: 12px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: relative;
}

/* ---------- topbar ---------- */
.tools-brand-row{
  position: absolute;
  top: 12px;
  left: 12px;
  right: 12px;
  width: min(calc(100% - 24px), 1420px);
  margin: 0 auto;
  display: grid;
  grid-template-columns: 13fr 7fr;
  align-items: center;
  min-height: 44px;
  padding: 4px 0;
  z-index: 20;
  pointer-events: none;
}

.topbar{
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--bg-1);
  border: 1px solid var(--bg-3);
  border-radius: 12px;
  flex-wrap: nowrap;
}

.topbar-right{
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  flex-wrap: nowrap;
  width: 100%;
}

/* Brand title + drone cluster */
.brandCluster{
  grid-column: 2;
  justify-self: stretch;
  width: 100%;
  display: inline-flex;
  align-items: center;
  gap: 14px;
  justify-content: flex-end;
}

/* Brand title (pixel glyph banner) */
.brandTitle{
  transform: scale(2);
  transform-origin: right center;
  display: inline-flex;
  flex: 0 0 auto;
  flex-wrap: nowrap;
  white-space: nowrap;
  line-height: 1;
  padding: 0;
  border: 0;
  background: transparent;
  box-shadow: none;
}

.brandDrone{
  width: 52px;
  height: 36px;
  flex: 0 0 auto;
  display: block;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  transform-origin: center;
  animation: droneHover 2.2s ease-in-out infinite;
  background: transparent !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  border: 0 !important;
}

@keyframes droneHover{
  0%{ transform: translateY(3px); }
  50%{ transform: translateY(0px); }
  100%{ transform: translateY(3px); }
}

.brandTitle canvas{
  background: transparent !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}

/* ---------- split workspace ---------- */
.split{
  display: grid;
  grid-template-columns: 13fr 7fr;
  gap: 12px;
  flex: 1 1 auto;
  height: auto;
  width: min(100%, 1420px);
  margin: 0 auto;
  min-height: 0;
  min-width: 0;
}

.font-pane,
.tools-pane{
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 0;
  min-width: 0;
}

.tools-pane{
  padding-top: 60px;
}

/* Panels inside each pane should be allowed to stretch */
.font-pane .panel,
.tools-pane .panel{
  flex: 1 1 auto;
  min-height: 0;
}

/* ---------- panels ---------- */
.panel{
  display: grid;
  grid-template-rows: auto 1fr;
  gap: 10px;
  padding: 12px;
  border-radius: 14px;
  background: var(--bg-1);
  border: 1px solid var(--bg-3);
  min-width: 0;
  min-height: 0;
}

.panel-no-header{
  grid-template-rows: 1fr;
}

.panel-header{
  display: flex;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
  align-items: center;
}

/* Base panel has a 2-row control stack */
.panel-base .panel-header{
  align-items: flex-start;
}

/* ---------- responsive ---------- */
@media (max-width: 1700px){
  .panel-base .panel-header-controls{
    grid-template-columns: minmax(0, 1fr);
    row-gap: 10px;
    justify-items: center;
  }

  .font-select-stack{
    max-width: 320px;
    align-items: stretch;
  }

  .import-select-stack{
    width: min(320px, 100%);
    min-width: 0;
  }

  .or-select-stack{
    width: 100%;
    max-width: 320px;
  }

  .swap-controls{
    grid-template-columns: 1fr;
    justify-items: center;
  }

  .swap-controls .field{
    width: min(320px, 100%);
  }
}

@media (max-width: 1100px){
  .app-shell{
    height: auto;
    min-height: 100vh;
  }

  .split{
    grid-template-columns: 1fr;
    width: 100%;
  }

  .tools-pane{
    padding-top: 0;
  }

  .tools-brand-row{
    position: static;
    top: auto;
    left: auto;
    right: auto;
    width: 100%;
    margin: 0;
    padding: 0;
    pointer-events: auto;
    display: flex;
    justify-content: flex-end;
    align-items: center;
  }

  .brandCluster{
    justify-self: end;
    width: auto;
    max-width: none;
    justify-content: flex-end;
    overflow: visible;
    gap: 10px;
  }

  .brandTitle{
    transform: none;
    transform-origin: center;
  }

  .panel-result .sidecar{
    flex: 1 1 auto;
    width: min(100%, 420px);
    grid-template-columns: 1fr;
  }
}

@media (max-width: 760px){
  .app-shell{
    padding: 8px;
  }

  .panel{
    padding: 10px;
  }

  .topbar{
    padding: 10px 12px;
  }

  .tools-brand-row{
    min-height: 36px;
    padding: 2px 0;
  }

  .brandCluster{
    gap: 10px;
    justify-content: flex-end;
  }

  .brandTitle{
    transform: none;
    transform-origin: center;
  }

  .brandDrone{
    width: 36px;
    height: 25px;
    flex: 0 0 auto;
    margin-left: 2px;
  }

  .zoom-canvas{
    max-width: 220px;
  }

  .dpad{
    flex-wrap: wrap;
    justify-content: center;
  }
}
